<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặt Hàng - Coffee House</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="trang-sản-phẩm.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand fs-4 fw-bold" href="index.html">
                <i class="fas fa-coffee me-2"></i> Coffee House
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="Trang-chủ.html">Trang Chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#about">Về Chúng Tôi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Đặt Hàng</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h1><i class="fas fa-shopping-bag me-3"></i>Đặt Hàng</h1>
            <p class="lead">Chọn những ly cà phê yêu thích của bạn</p>
        </div>
    </div>

    <!-- Search Section -->
    <div class="container">
        <div class="search-section">
            <div class="row">
                <div class="col-md-10 mx-auto">
                    <div class="input-group">
                        <input type="text" class="form-control search-input" id="searchInput" 
                               placeholder="Tìm kiếm cà phê theo tên...">
                        <button class="btn btn-primary btn-search" type="button" id="searchBtn">
                            <i class="fas fa-search me-2"></i> Tìm Kiếm
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Section -->
    <div class="container">
        <div class="filter-section text-center">
            <button class="btn filter-btn active" data-filter="all">
                <i class="fas fa-list me-2"></i> Tất Cả
            </button>
            <button class="btn filter-btn" data-filter="espresso">
                <i class="fas fa-coffee me-2"></i> Espresso
            </button>
            <button class="btn filter-btn" data-filter="latte">
                <i class="fas fa-mug-hot me-2"></i> Latte
            </button>
            <button class="btn filter-btn" data-filter="cold">
                <i class="fas fa-glass-whiskey me-2"></i> Cà Phê Lạnh
            </button>
        </div>
    </div>

    <!-- Products Grid -->
    <div class="container mb-5">
        <div class="row" id="productsGrid">
            <!-- Products will be loaded here by JavaScript -->
        </div>
    </div>

    <!-- Floating Cart Icon -->
    <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-badge" id="cartCount">0</span>
    </div>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-shopping-cart me-2"></i> Giỏ Hàng Của Bạn
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="cartBody">
                    <!-- Cart items will be loaded here -->
                </div>
                <div class="modal-footer">
                    <div class="w-100">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="mb-0">Tổng Cộng:</h4>
                            <h3 class="mb-0 text-primary" id="totalPrice">0đ</h3>
                        </div>
                        <button type="button" class="btn btn-secondary w-100 mb-2" data-bs-dismiss="modal">
                            <i class="fas fa-arrow-left me-2"></i> Tiếp Tục Mua Hàng
                        </button>
                        <button type="button" class="btn btn-primary w-100" id="checkoutBtn">
                            <i class="fas fa-check-circle me-2"></i> Thanh Toán
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5><i class="fas fa-coffee me-2"></i> Coffee House</h5>
                    <p>Mang đến cho bạn những tách cà phê ngon nhất với tình yêu và đam mê.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Liên Hệ</h5>
                    <p><i class="fas fa-map-marker-alt me-2"></i> 123 Đường Nguyễn Huệ, Q1, TP.HCM</p>
                    <p><i class="fas fa-phone me-2"></i> 0123 456 789</p>
                    <p><i class="fas fa-envelope me-2"></i> info@coffeehouse.vn</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Theo Dõi Chúng Tôi</h5>
                    <a href="#" class="text-white me-3"><i class="fab fa-facebook fa-2x"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-instagram fa-2x"></i></a>
                    <a href="#" class="text-white"><i class="fab fa-youtube fa-2x"></i></a>
                </div>
            </div>
            <hr class="bg-white">
            <div class="text-center">
                <p class="mb-0">&copy; 2024 Coffee House. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Products Data
        const products = [
            { 
                id: 1, 
                name: 'Espresso Đậm Đà', 
                category: 'espresso', 
                price: 35000, 
                image: 'https://images.unsplash.com/photo-1510591509098-f4fdc6d0ff04?w=400', 
                description: 'Hương vị mạnh mẽ, đậm đà của cà phê nguyên chất',
                bestseller: true 
            },
            { 
                id: 2, 
                name: 'Cappuccino Ý', 
                category: 'latte', 
                price: 45000, 
                image: 'https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=400', 
                description: 'Sự kết hợp hoàn hảo giữa espresso và sữa tươi',
                bestseller: true 
            },
            { 
                id: 3, 
                name: 'Latte Vanilla', 
                category: 'latte', 
                price: 50000, 
                image: 'https://images.unsplash.com/photo-1561882468-9110e03e0f78?w=400', 
                description: 'Vị ngọt nhẹ của vanilla hòa quyện cùng cà phê',
                bestseller: false 
            },
            { 
                id: 4, 
                name: 'Americano', 
                category: 'espresso', 
                price: 40000, 
                image: 'https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?w=400', 
                description: 'Espresso pha loãng với nước nóng, thanh thoát',
                bestseller: true 
            },
            { 
                id: 5, 
                name: 'Cà Phê Sữa Đá', 
                category: 'cold', 
                price: 30000, 
                image: 'https://images.unsplash.com/photo-1517487881594-2787fef5ebf7?w=400', 
                description: 'Hương vị truyền thống Việt Nam đậm đà',
                bestseller: true 
            },
            { 
                id: 6, 
                name: 'Mocha Socola', 
                category: 'latte', 
                price: 55000, 
                image: 'https://images.unsplash.com/photo-1578314675249-a6910f80cc4e?w=400', 
                description: 'Sự kết hợp tuyệt vời giữa cà phê và socola',
                bestseller: false 
            },
            { 
                id: 7, 
                name: 'Cold Brew', 
                category: 'cold', 
                price: 48000, 
                image: 'https://images.unsplash.com/photo-1461023058943-07fcbe16d735?w=400', 
                description: 'Cà phê ủ lạnh 12 giờ, vị ngọt tự nhiên',
                bestseller: false,
                isNew: true
            },
            { 
                id: 8, 
                name: 'Caramel Macchiato', 
                category: 'latte', 
                price: 52000, 
                image: 'https://images.unsplash.com/photo-1599750753000-3bc1a0cf6c6f?w=400', 
                description: 'Vị ngọt béo của caramel hòa quyện espresso',
                bestseller: true 
            },
            { 
                id: 9, 
                name: 'Espresso Con Panna', 
                category: 'espresso', 
                price: 42000, 
                image: 'https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400', 
                description: 'Espresso với kem tươi bông mịn',
                bestseller: false,
                isNew: true
            },
            { 
                id: 10, 
                name: 'Iced Latte', 
                category: 'cold', 
                price: 45000, 
                image: 'https://images.unsplash.com/photo-1517668808822-9ebb02f2a0e6?w=400', 
                description: 'Latte mát lạnh, thơm ngon sảng khoái',
                bestseller: false 
            },
            { 
                id: 11, 
                name: 'Flat White', 
                category: 'latte', 
                price: 48000, 
                image: 'https://images.unsplash.com/photo-1485808191679-5f86510681a2?w=400', 
                description: 'Espresso với lớp sữa tươi mịn màng',
                bestseller: false 
            },
            { 
                id: 12, 
                name: 'Bạc Xỉu Đá', 
                category: 'cold', 
                price: 32000, 
                image: 'https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400', 
                description: 'Cà phê sữa nhẹ nhàng, thanh mát',
                bestseller: true 
            }
        ];

        let cart = [];
        let currentFilter = 'all';

        // Render Products
        function renderProducts(filter = 'all', search = '') {
            let filtered = products;
            
            if (filter !== 'all') {
                filtered = filtered.filter(p => p.category === filter);
            }
            
            if (search) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(search.toLowerCase())
                );
            }

            const html = filtered.map(product => `
                <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                    <div class="card product-card">
                        <div class="product-image">
                            ${product.bestseller ? '<span class="badge-bestseller"><i class="fas fa-fire me-1"></i> Bán Chạy</span>' : ''}
                            ${product.isNew ? '<span class="badge-new"><i class="fas fa-star me-1"></i> Mới</span>' : ''}
                            <img src="${product.image}" alt="${product.name}">
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">${product.name}</h5>
                            <p class="product-description">${product.description}</p>
                            <div class="product-price">${product.price.toLocaleString('vi-VN')}đ</div>
                            <button class="btn btn-add-cart" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus me-2"></i> Thêm Vào Giỏ
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('productsGrid').innerHTML = html || 
                '<div class="col-12"><div class="empty-cart"><i class="fas fa-search"></i><h4>Không tìm thấy sản phẩm nào</h4><p>Vui lòng thử tìm kiếm với từ khóa khác</p></div></div>';
        }

        // Add to Cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existing = cart.find(item => item.id === productId);
            
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            updateCartCount();
            showNotification('Đã thêm vào giỏ hàng!');
        }

        // Update Cart Count
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        // Render Cart
        function renderCart() {
            const cartBody = document.getElementById('cartBody');
            
            if (cart.length === 0) {
                cartBody.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart"></i>
                        <h4>Giỏ hàng trống</h4>
                        <p>Hãy thêm sản phẩm vào giỏ hàng của bạn</p>
                    </div>
                `;
                document.getElementById('totalPrice').textContent = '0đ';
                return;
            }

            const html = cart.map(item => `
                <div class="cart-item">
                    <div class="row align-items-center">
                        <div class="col-3">
                            <img src="${item.image}" class="img-fluid rounded" alt="${item.name}">
                        </div>
                        <div class="col-5">
                            <h6 class="mb-1">${item.name}</h6>
                            <small class="text-muted">${item.price.toLocaleString('vi-VN')}đ</small>
                        </div>
                        <div class="col-4">
                            <div class="quantity-control justify-content-end">
                                <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                                <span class="fw-bold">${item.quantity}</span>
                                <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                                <button class="btn btn-sm btn-danger ms-2" onclick="removeFromCart(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            cartBody.innerHTML = html;
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('totalPrice').textContent = total.toLocaleString('vi-VN') + 'đ';
        }

        // Update Quantity
        function updateQuantity(productId, change) {
            const item = cart.find(i => i.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartCount();
                    renderCart();
                }
            }
        }

        // Remove from Cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
            renderCart();
            showNotification('Đã xóa khỏi giỏ hàng');
        }

        // Show Notification
        function showNotification(message) {
            // Simple alert for now, can be replaced with toast notification
            const notification = document.createElement('div');
            notification.className = 'alert alert-success position-fixed top-0 start-50 translate-middle-x mt-3';
            notification.style.zIndex = '9999';
            notification.innerHTML = `<i class="fas fa-check-circle me-2"></i>${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Event Listeners
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFilter = this.dataset.filter;
                renderProducts(currentFilter, document.getElementById('searchInput').value);
            });
        });

        document.getElementById('searchBtn').addEventListener('click', () => {
            renderProducts(currentFilter, document.getElementById('searchInput').value);
        });

        document.getElementById('searchInput').addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                renderProducts(currentFilter, e.target.value);
            }
        });

        document.getElementById('cartIcon').addEventListener('click', () => {
            renderCart();
            new bootstrap.Modal(document.getElementById('cartModal')).show();
        });

        document.getElementById('checkoutBtn').addEventListener('click', () => {
            if (cart.length === 0) {
                alert('Giỏ hàng trống! Vui lòng thêm sản phẩm.');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const orderDetails = cart.map(item => `${item.name} x${item.quantity}`).join('\n');
            
            alert(`Cảm ơn bạn đã đặt hàng!\n\nChi tiết đơn hàng:\n${orderDetails}\n\nTổng cộng: ${total.toLocaleString('vi-VN')}đ\n\nChúng tôi sẽ liên hệ với bạn sớm nhất!`);
            
            cart = [];
            updateCartCount();
            bootstrap.Modal.getInstance(document.getElementById('cartModal')).hide();
        });

        // Initialize
        renderProducts();
    </script>
</body>
</html>